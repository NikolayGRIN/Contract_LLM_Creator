Результаты генерации

В данной директории представлены примеры результатов генерации договорных разделов,
полученных с помощью полностью оффлайн-пайплайна.

Содержимое директории

- `Русский.txt` — пример сгенерированного договора на русском языке
- `English.txt` — пример сгенерированного договора на английском языке

Файлы содержат, в частности:
- раздел **PAYMENT_TERMS / Условия оплаты**,
- раздел **DELIVERY_TERMS / Условия поставки**.

Используемый пайплайн

Генерация выполняется скриптом `run_generate.py`

Основные этапы:

1. Валидация входных данных  
   - `src/validation/form_validate.py`
   - JSON Schema: `contract_form_v1.schema.json`

2. Извлечение прецедентов (retrieval)  
   - `src/retrieval/bm25.py`
   - алгоритм BM25
   - параметр `top_k` задаёт число используемых прецедентов

3. Очистка прецедентов  
   - `src/cleaning/precedent_cleaner.py`

4. Построение промптов  
   - `src/generation/payment_terms_generate.py`
   - `src/generation/delivery_terms_generate.py`

5. Генерация и автоматическая проверка  
   - локальная LLM через `llama-cpp-python`
   - `src/generation/local_llm.py`
   - валидаторы:
     - `payment_terms_validator.py`
     - `delivery_terms_validator.py`

6. Повтор генерации (retry) при несоответствии требованиям


Ключевые параметры генерации

- Количество прецедентов (`top_k`): 3–10
- Минимальное число подпунктов:
  - Payment Terms — 20+
  - Delivery Terms — 20+
- Формат нумерации:
  - `1.1., 1.2., …`
  - `2.1., 2.2., …`
- Язык генерации задаётся параметром `language_mode` в `form_input.json`:
  - `"ru"` — русский
  - `"en"` — английский

Воспроизведение результатов

Для воспроизведения результатов:

1. Разместить GGUF-модель (см. `MODELS.md`)
2. Установить зависимости: pip install -r requirements.txt
3. Запустить: python run_generate.py
4. Результат: файл out.txt в корне репозитория, диагностические файлы в директории debug.

Данные результаты демонстрируют возможность контролируемой генерации
юридически структурированных договорных разделов
на основе локального корпуса и без использования облачных LLM